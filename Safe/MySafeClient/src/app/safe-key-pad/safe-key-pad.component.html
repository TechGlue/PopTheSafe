<div>
  @if (safeResponse != undefined) {
    <div class="text-xl font-bold">
      <p>Safe {{ safeId }} Status: {{ safeResponse.isDetail }}</p>
      <p>Current State Id: {{ safeResponse.stateId }}</p>
    </div>


    <div class="mt-4">
      <div class="flex flex-row gap-2">
        @for (item of digits; track item) {
          <button
            (click)="concatNumberToInput(item.toString())"
            class="rounded bg-indigo-500 hover:bg-fuchsia-500 p-4"
          >
            {{ item }}
          </button>
        }
      </div>


      <div class="mt-4 text-xl font-bold flex flex-row gap-2">
        @if (openValidStatusId.has(safeResponse.stateId)) {
          <button
            (click)="safeOpen()"
            class="rounded bg-amber-500 hover:bg-amber-400 p-4"
          >
            Open
          </button>
        } @else {
          <button
            (click)="safeOpen()"
            class="rounded bg-gray-500 text-white hover:bg-gray-400 p-4"
          >
            Open
          </button>
        }
        @if (closeValidStatusId.has(safeResponse.stateId)) {
          <button
            (click)="safeClose()"
            class="rounded bg-green-500 hover:bg-green-400 p-4"
          >
            Close
          </button>
        } @else {
          <button
            (click)="safeClose()"
            class="rounded bg-gray-500 text-white hover:bg-gray-400 p-4"
          >
            Close
          </button>
        }

        @if (lockValidStatusId.has(safeResponse.stateId)) {
          <button
            (click)="safeLock()"
            class="rounded bg-blue-950 text-white hover:bg-sky-400 p-4"
          >
            Lock
          </button>
        } @else {
          <button
            (click)="safeLock()"
            class="rounded bg-gray-500 text-white hover:bg-gray-400 p-4"
          >
            Lock
          </button>
        }

        @if (submitValidStatusId.has(safeResponse.stateId)) {
          <button
            (click)="submitSafePin(digitsInput)"
            class="rounded bg-sky-500 hover:bg-sky-400 p-4"
          >
            Submit
          </button>
        } @else {
          <button
            (click)="submitSafePin(digitsInput)"
            class="rounded bg-gray-500 text-white hover:bg-gray-400 p-4"
          >
            Submit
          </button>
        }

        <button
          (click)="clearInput()"
          class="rounded bg-red-500 hover:bg-red-400 p-4"
        >
          Clear
        </button>

        @if (resetValidStatusId.has(safeResponse.stateId)) {
          <button
            (click)="resetSafePin()"
            class="rounded bg-fuchsia-500 hover:bg-fuchsia-400 p-4"
          >
            Reset
          </button>
        } @else {
          <button
            (click)="resetSafePin()"
            class="rounded bg-gray-500 text-white hover:bg-gray-400 p-4"
          >
            Reset
          </button>
        }
      </div>

      <div class="text-xl font-bold mt-4">
        <div class=" font-bold">
          @if (digitsInput == "") {
            <p class="">Entered SafeCode: awaiting a safe pin</p>
          } @else {
            <p class="">Entered SafeCode: {{ digitsInput }}</p>
          }
        </div>
      </div>
    </div>
  }

</div>
